---
title: "TYLab Workshop Class1"
author: "Zong-Xian Huang"
date: "2018/12/13"
output: html_document
---
<style type="text/css">

body{ /* Normal  */
   font-size: 20px;
}
td {  /* Table  */
   font-size: 12px;
}
h1 { /* Header 1 */
 font-size: 28px;
 color: DarkBlue;
}
h2 { /* Header 2 */
 font-size: 22px;
 color: DarkBlue;
}
h3 { /* Header 3 */
 font-size: 18px;
 color: DarkBlue;
}
code.r{ /* Code block */
  font-size: 16px;
}
pre { /* Code block */
  font-size: 16px
}
</style>

# ?s?B?}?l???e

- ?Ĥ@?B?G?U??R??https://cran.rstudio.com/
- ?ĤG?B?G?U??R Studio?Ghttps://www.rstudio.com/products/rstudio/download/


# ?@?BR?????Ҥ???

<img src="/Users/huangzongxian/Desktop/R/TYLab Workshop/image_preview.png" width="75%"/>

- ?p???s?W?P?x?sScript?BMarkdown?BProject
- ?????????ܩ?`Environment`
- ?U???P?ϥήM?????ܩ?`Package`
- ?N?X?????G?P?Ϫ??|?��O???ܩ?`Console`?P`Plots`

# ?G?B?}?l?a?G???а򥻹B???l?P?ܼƫ???

- R?���?̭??n???Ÿ??O`<-`?P`=`?A?L?̳Q?٧@???????B???l?]??ĳ?ϥ?`<-`?^?A?Ψӫ????Ȩ??Y???ܼƤW?C?̪??[?????k?N?O?A?b?Y?k???|?h???N?b?Y???䪺?F???C
- ?????ܼƦW?ٴN?i?H?I?s?ܼơA???A???ƫ??w???P?@???ܼƮɡA???????ȴN?|?Q???N?C
- ?ϥΧֱ???`ctlr+enter`?Y?i?????Ӧ????O
- ?A?i?H?ϥ?`rm()`???????A?n?R?????ܼơA???a?@???A`rm(list=ls())`?h?i?H?????M???k?W??environment?���???Ҧ??ܼƻP??

```{r}
x <- 5566
x
x <- "?????`"
x
rm(x)
rm(list = ls())
```
- R?]?i?H?????p?????ӨϥΡA?򥻪??B???l???]?t?U?C?X?ӡG
- `+`?B`-`?B`*`?B`/`?G?@?L??��?A?N?u?O?ӥ[???
- ?i???B???l?G????`^2`?B?l??`%%`?B
- ?޿??B???l?G`>`?B`<`?B`>=`?B`<=`?B`==`?B`!=`

```{r}
#?[???
1+1
1-1
1*2
1/2

#?i???B???l
2^10
5%%2

#?޿??B???l
5==5
3>5
1!=1
```

- ????function?i?H?p?????????????B???A?Ҧp`sqrt()`?B`sum()`?B`sd()`?B`median()`?B`mean()`..

```{r}
sqrt(2)    # ?}?ڸ?
sum(1:10)  # ?`?M
sd(1:10)   # ?зǮt
median(1:10)  # ??????
mean(1:10)  # ??????
var(1:10) # ?ܲ???
round(var(1:10),digits = 3) # ?|?ˤ??J???ĤT????
```
# ?T?B?򥻸????ݩ?
R?ҨϥΪ??ƭ??ݩʤj???��??U?C?X?Ӥj???A?ڭ̥i?H?δ??q?ثת??覡?ӷQ??

- `numeric`: ?i?]?t?p?ƪ??Ʀr?A?Ҧp 1?B2?B3.5?B55.66??
- `character`: ???r?A?Ҧp ?A?B?n?B?ܡA?Q??`""`?]?_?Ӫ??ȥ??????|?Q???@`character`
- `integer`: ???ơA?i?H??1L?B2L???覡?Ӫ??F
- `logical`: ?޿??ATRUE & FALSE
- `complex`: ?ƼơA?Ҧp 1+2i...?S?Ƥ??|?Ψ?
- ?ϥ?`class()`?i?H?˴??ܼƪ??ݩ?
```{r}
# Try it!
class(2)
class("2")
class(2L)
class(2==2)
class(2+2i)
```
?P???[?M:

- `factor`: ?��ŹL?᪺?V?q?A???ݭn?��ծɬ۷??n?ΡC
```{r}
x <- c(4,4,3,2,2,1,4,2)
y <- factor(x)
factor(x, labels = c("?D?`?????N", "?????N", "???N", "?D?`???N")) # ?i?ۭq Level ???W?١C
factor(x, ordered = TRUE)
sum(x)  # sum(y)
```


# ?|?BR?????Ʈ榡?P???c
?b?A?ѳ????ܼƪ??ݩʤ????A?ڭ̶}?l???и??Ƶ??c?C???Ƶ??c?N???O?e???@?ˡA?N?ڭ̭????e?????쪺?ܼƩάO?ƭȱƦC???S?w???榡?A?̷ӽ????{?ץѧC?찪?j???i?H?��?:

- `variable`: ???׬?1???V?q?A?]?t?̰򥻪??ȡA?i?H?Ϋe???ڭ̾Ƿ|??`<-`?ӫ??w?ܼơC


```{r}
x <- 5566
length(x)
```
- `vector`: ?i?H?Q?????@????variable?ƱƯ??A?O?c?????Ʈج[?̰򥻪??????C?z?L`c()`?i?H?N?ƭӭȩάO???r?ꦨ?@?Ӫ??׸??????V?q?C

```{r}
x <- 5566
y <- "?o?Ĥ@"
z <- c(x,y)
z
length(z)
```


- ?Q??`cbind()`??`rbind()`?i?H?Nvector???ƦX?֦??????׸???

```{r}
x <- 1:10
y <- letters[1:10]
cbind(x,y)
rbind(x,y)
```

- ???K?m?ߴX?ӳгy?Ȫ?function?A?Ҧp`seq()`?B`rep()`
- ???A??`[]`?i?H?ΨӬD???S?w???m??????

```{r}
seq(1,10)
seq(1,10,2)
x <- seq(1,10,2)
rep(x,3)
x[5]
```

- `matrix`: ?x?}?A?x?}?????Ʈ榡?p?U
matrix(data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL)
- ?i??`help()`?Ӭd?ݻ????P?d??

```{r}
matrix(data=1:6,nrow=2,byrow=F,dimnames = list(c("row1","row2"),
                                               c("col.1","col.2","col.3")))

matrix(data=1:6,nrow=2,byrow=T,dimnames = list(c("row1","row2"),
                                               c("col.1","col.2","col.3")))
help("matrix")
```
- ?Q?n???D?x?}?????ơB?C?ƥi?ϥ? `ncol()`?B`nrow()`?B`dim()`
- `rownames()`?B`colnames()`?h?i?H?ΨөR?W
```{r}
mat <- matrix(1:6,nrow=2,byrow=T)
nrow(mat)
ncol(mat)
dim(mat)
rownames(mat) <- c("row1","row2")
colnames(mat) <- c("col.1","col.2","col.3")
```
- `[]`?i?H?Ψӧ????m?A?O?o`[]`???Ʀr???ƦC?O`[row,col]`
```{r}
mat
mat[1,2]
mat["row1","col.2"]
mat[1,]  # ?Ĥ@?C?Ҧ?
mat[,2]  # ?ĤG???Ҧ?
```
- `data.frame`: R?̭??n?????Ƶ??c?A?\??????excel??SPSS???????W?١C?ѩ?data frame?????P?椧???i?H?x?s???P???????ݩʡA?]???b?ϥΤW??matrix?u?ʡC
```{r}
data.frame(name=c("Rory","???p","EJ","yen","????","Sam","Anna","Ting","?ӫ?"),age=c(18,25,24,24,24,24,23,23,20),height=c(168,172,165,156,170,168,160,158,168))
#another way
name <- c("Rory","???p","EJ","yen","????","Sam","Anna","Ting","?ӫ?")
age <- c(18,25,24,24,24,24,23,23,20)
height <- c(168,172,165,156,170,168,160,158,168)
data.frame(name=name,age=age,height=height)
```
- `summary()`?Ψӧe?{???ƪ??y?z?έp?B`str()`?h?e?{???쪺?ݩʡB`head()`?h?e?{?e???????ơA?b?B?z?j?q???Ʈɥ???��?????ݩʻP?򥻪??y?z?έp?O?۷���?n??

```{r}
df<- data.frame(name=c("Rory","???p","EJ","yen","????","Sam","Anna","Ting","?ӫ?"),age=c(18,25,24,24,24,24,23,23,20),height=c(168,172,165,156,170,168,160,158,168))
summary(df)
str(df)
head(df)
```

- `list`: dataframe???u?ʦb???e?\???줧???????P???????ݩʡA??list?h???i?H?e?\???P?????Ƶ??c?]?t?i?h?P?@??list?���?C?|?ҦӨ??A?i???����??ήɡA?|???����y?z(vector)?B?����???(data.frame)?????A???ɴN?|?ͦ??@??list?N?o?Ǥ??P???c?????ƥ]???@?Ӹ??ƫK???B?z?C
- ?Q??`list`?N?i?H?N?A?n?????ƥ]?ilist?���?A`unlist`?h?i?H?j???Nlist???Ѧ?vector???Φ?
```{r}
vec.1 <- "?o?O?@?ӦC?���??"
mat.1 <- matrix(1:15,nrow=3,byrow = T)
df.1 <- data.frame(name=c("Rory","???p","EJ","yen","Sam","Anna"),age=c(18,25,24,24,24,23),
           height=c(168,172,165,158,168,160))
list.1 <- list(vec.1,mat.1,df.1)
names(list.1)<-c("?V?q","?x?}","???Ʈج[")
```

- list?���?????Ʀ??m?i?H??`[[]]`?ӧ????A?᭱???W`[]`?h?i?H???S?w????
- ?????I?s?W?٤]?O?i?檺???k

```{r}
list.1[[1]]
list.1[["?V?q"]]
list.1[[2]][3,1]
list.1[[3]][2,]
```

- ???p?A?Q?n?R??list?���???Y?@?Ӹ??ƶ??A?????L??`NULL`?Y?i?R??

```{r}
list.1[[1]] <- NULL
list.1[["?V?q"]]  # ???????m?b?Ĥ@?Ӫ??V?q?Q?R???F
```


# ???B???ƲM?z?P?B??
???Ч??????ݩʻP???Ƶ??c?A?Q???j?a????R???B?Φ??Ӫ??B???A?ѡA???X?S?w???ƭȨóB?z?O?H
?D?n?i?H???U?C?T?ӨB?J:
- ?Q??`[]`???X???m
- ?Q???޿???`TURE`??`FALSE`
- ?Q?ΦW??

- ?b`vector`?���?ڭ̷Q???ܼƬO?ƱƯ????A?ζ??Ǫ????��ӷQ?????l
```{r}
x <- c(1,4,5,6,7,8,12)
x[c(1,3,5)] # ?z?L???m??
```

- ?z?L`TURE`??`FALSE`???ܡA?ڭ̷|?ߺD?]?w?@?ӱ????A???n??��?ڭ̥ͦ??޿??ȡA?Q??`which()`?i?H???X`TURE`?????m
- ???M?A??????`T`or`F`?]?O?i?檺

```{r}
x[c(T,F,T,F,T,F,F)]
x[which(x%%2!=0)] # ???X?_??
x[which(x%%2==0)] # ???X????
```

- ?A??`which`??`TRUE`?????????Y?A???????򪺸??ƳB?z???۷??j??��?U
- ?յۿ??J?H?Ucode?a?I

```{r}
which(c(T,F,T,T,F))
which(c(T,T,T,F,T))
```

- ?Q?δ`-`?N?i?H?R???έק?Vector?���?????ơA?O?o?ק????n?z?L`<-`?????^?h??

```{r}
x <- 1:10
x[-c(1,3,5,7,9)]
x
x <- x[-c(1,3,5,7,9)]
x
```

# QUIZ!!

?Ч??X1~100?????A?L?k?Q2?P3?㰣???Ʀr?A?ë??????@?ӷs???V?q

```{r}
x <- 1:100
y <-  x[which(x%%2!=0 & x%%3 !=0)]
y
```

- `as.XXX`?h?i?H?ഫvector???????ݩʡA???n?`?N???O?????ഫ?|???ƭ??ܦ?`NA`?A?Ҧp???A?N???r?ন?Ʀr???ɭ?

```{r}
x <- c(1,3,5,7)
class(x)
x <- as.integer(x)
class(x)
x <- as.character(x)
class(x)
x <- as.numeric(x)
class(x)
y <- c("?A","?n","??")
y <- as.numeric(y)
y
```


- `data.frame`???B?z?ڭ̥i?H?N???Q????2?Ӻ??ת??V?q
- Data.frame?????K???B?b??`$`?i?H???X?S?w?????W?٪???

```{r}
name <- c("Rory","???p","EJ","yen","Sam","Anna")
age <- c(18,25,24,24,24,23)
height <- c(168,172,165,158,168,160)
df<- data.frame(name=name,age=age,height=height)
df$name[6]
df$age[6]
df$height[6]
df[6,]
```

- `which`?P`TURE`?????B?Τ]?P?˾A?Ω?data.frame?????A
- ?w?ˮM???P`library()`
- `data(package = .packages(all.available = TRUE))`?i?H?C?X?Ҧ??A?i?Ϊ?dataset
- ?ڭ̧Q??`airquality`???ƶ??ӽm?ߧa! `????ƶ??W??`?Y?i?ݨ????컡??
```{r}
#install.packages("datasets")
library(datasets)
data(package = .packages(all.available = TRUE))
?airquality
dt.1 <-  airquality
str(dt.1)
summary(dt.1)
```

- ?????ڭ̵o?{???Ʒ���???@?ǿ??|??`NA`?A?z?L`is.na()`?i?H?Ψ??˴????Ʒ���?????|?ȡC`na.omit()`?i?H?ɤO?a?N?Ҧ????|?Ȳ????A?????p?A?O?Q?n?i?洡?ɪ??N????ĳ?o?ؤ覡
- ???U?ӬD?X7?????P9?????????ƨӬݬݡC`&`?N?���?O?涰(AND)?B`|`?h?N???p??(OR)
- ???X7?????P9???????~?u???Ƥj?󥭧??????l

```{r}
is.na(dt.1)
dt.1<- na.omit(dt.1)
dt.2<- dt.1[which(dt.1$Month==7 | dt.1$Month==9),]
dt.2[which(dt.2$Solar.R>mean(dt.2$Solar.R)),]
```

# ???B?y?{?????P?j??

?b?i???y?{????e?A?ڭ̥??????A?ѡu?P?_???v?A?P?_???N?O???{???P?_???|?R?XTRUE or FALSE?A?A?ǥ?TRUE or FALSE ?????p?i???y?{???? 

- ?e???Ǩ쪺?޿??B???l?i?H?B?Φb?o??
```{r}
'?o?Ĥ@'=='???䥩???o?Ĥ@'
3>7
5>3 & 5>4   
5>3 | 5>7
```

???A???ѷQ?n???Y?ǨƱ??A?ӧA?ݭn?]?w?@?Ǳ??󪺮ɭԡA?N?i?H?q?L?]???󦡻P???O???覡?ӹF???C

if(?P?_){#do something}
else if (?P?_){#do something}
else{#do something}

- `if` ?B`else`?B `else if` ?O?{???y?????̱`?Ϊ????????O?Φ?

```{r}

age <- 20
if(age > 18){
print("?A?i?H?ܰs")
}

age <- 16
if(age >18){
print("?A?i?H?ܰs")
}

age <- 16
if(age>18){
print("?A?i?H?ܰs")
}else{
print("?A?????ܰs")
}

age <- round(runif(1, -1000,20))

if(age>18){
  print("?A?i?H?ܰs")
}else if(age<0){print("?~?֤??|???t??")}else{
  print("?A?????ܰs")
}
```

???A?ݭn?P?ɭn?D?h?ӼƭȮ?(?Ҧp?P?ɳB?z?ܦh?C???ƭ?)???ۦP???󪺨Ʊ??ɡA?A?i?H?z?L?j??(for-loop)???O?f?t?e??��???y?{???????O?ӧ????C

- ?b?j?餤?n?`?N?????��O?A?C???u?|?X?̤@?ӧ??J???ȡA?åB?R?X?@?ӫ??O?C?]?N?O?Q???C?@?鳣?O???s???}?l?A?u?O?b???O?���?Y?Ӥ??��??ܰʡA?ӾɭP???G?????P?C

```{r}
for (i in 1:10){
  print(i)
}
all <- c()
for (i in 1:10){
  all <- c(all,i*2+1)
}
all

# ?D???X1??100????????
all <- c()
for(i in 1:100){
if(i%%2==0){
all <- c(all,i)
}
}
all
```

-`while`??��?ΡAwhile?᭱?????O?@?ӱ????A???o?ӱ?????TRUE???ɭԤ~?|?????U?C???O?C
- `while`?P`if`?ܱ`?g?X???~?P?k?????G

```{r}
# ?p??1~100???n????
i <- 1
result <- 0
while(i<101){
result <- result + i 
i <-  i+1
}
```

- `break`?P`next`?h?O?ΨӰw???S?w???p?Ӳפ??θ??L?j??
- if(????) break: ?o?ͬY?ت??p?ɡA?פ??j??
- if(????) next: ?o?ͬY?ر????ɡA???L?j??(?]?N?O???B?z?ӰϬq?????O)

```{r}
#break
for (i in 1:100){
  if (i > 10) break
  print(i)
}

#next
for (i in 1:100){
  if (i > 10 && i <50) next
  print(i)
}


```


# ?C?B???X?m?ߡI?I?I
?????j?a?i?H???⤺?ت?data?s?X?ӡA?O?@?????????��᪺???ƶ?`iris`
- practice <- iris
?????ڭ̦P?˥??????o?Ӹ??ƶ??@?@???˵??A?]?t`head()`?B`str()`?B`summary()`
???ۦ]???L?Odataframe?A?i?H?I?}?˵??@?U???ƶ????˦?
???ۥH?U?O???Ѫ????X?m?ߡA?|?Ψ줵?ѱЪ??@?ǧޥ??C
?Фj?a???H???��???

- 1. data????Species?o?@???O?@??factor(???j?p???��????r)?A?p???N?????Ʀ?character
- 2. Sepal.Length?o?檺?зǮt?????H
- 3. ???XSepal.Width?o?檺?|?ؼg?k?ñN???R?W??t1 (hints?G???m?B?W?١B?޿??B$)
- 4. ?Q??t1?o??vector?A?��??R?W(?????μƦC?R?W?N?i?H)?åB?Q?ΰ??FT/F???k?~???X??7????21?ӭ?
- 5. ?g?X?@?ӱ??󦡡A???]???@??x?A?Y???J?i?h?Ȥj??Petal.Length??print?X'?W?L????'?A?p???hprint?X'?p?󥭧?'?A?Y?O?t????print?X'???|???t??'
- 6. ?ЧQ?ΰj?????X?C?@?檺?ܲ??ƨæ????@?ӷs??vector?]?ƭȥ|?ˤ??J???p???I?ĤG???^


```{r}
# answer
# 00
practice <- iris
head(practice)
str(practice)
summary(practice)

# 01
practice$Species <- as.character(practice$Species)
practice[,5] <- as.character(practice[,5])
practice[,'Species'] <- as.character(practice[,'Species'])

# 02
sd(practice$Sepal.Length)
sd(practice[,1])
sd(practice[,'Sepal.Length'])

# 03
t1 <- practice[,2]
t1 <- practice[,'Sepal.Width']
t1 <- practice$Sepal.Width
t1 <- practice[,c(F,T,F,F,F)]

# 04
names(t1) <- 1:length(t1)
t1[c(7,21)]
t1[c('7','21')]

# 05
leng <- 5.5
if(leng>mean(practice$Petal.Length)){
  print("?W?L????")
}else if(leng<mean(practice$Petal.Length)&leng>0){
  print("?p?󥭧?")
}else{
  print("???|???t??")
}
#06
result <- c()
for(i in 1:4){
  var1 <- var(practice[,i])
  var1 <- round(var1,digits = 2)
  result <- c(result,var1)
}
result

# apply???ƥi?H???֪????X???G
apply(practice[1:4],2,var)
```
